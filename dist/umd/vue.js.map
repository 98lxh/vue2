{"version":3,"file":"vue.js","sources":["../../src/compiler/generate.js","../../src/compiler/parserHTML.js","../../src/compiler/index.js","../../src/utils/index.js","../../src/observer/array.js","../../src/observer/dep.js","../../src/observer/index.js","../../src/state.js","../../src/utils/nextTick.js","../../src/schedular.js","../../src/observer/watcher.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/utils/merge.js","../../src/init.js","../../src/utils/isReservedTag.js","../../src/vdom/createElement.js","../../src/render.js","../../src/initGlobalAPI/const.js","../../src/initGlobalAPI/assets.js","../../src/initGlobalAPI/initExtend.js","../../src/initGlobalAPI/mixin.js","../../src/initGlobalAPI/index.js","../../src/index.js"],"sourcesContent":["function gen(node) {\n  if (node.type === 1) {\n    //元素节点\n    return generate(node)\n  } else {\n    //文本\n    let text = node.text;\n    const tokens = [];\n    while (text.trim()) {\n      //文本的结束位置\n      const textEndIndex = text.indexOf(\"{{\")\n\n      if(textEndIndex === -1){\n        return `_v(\"${text}\")`\n      }\n\n      if (textEndIndex === 0) {\n        //表达式的结束位置\n        const execEndIndex = text.indexOf(\"}}\")\n        tokens.push(`_s(${text.slice(textEndIndex + 2, execEndIndex)})`)\n        text = text.slice(execEndIndex + 2)\n      } else {\n        tokens.push(JSON.stringify(text.slice(0, textEndIndex)))\n        text = text.slice(textEndIndex)\n      }\n    }\n    return `_v(${tokens.join(\"+\")})`\n  }\n}\n\nfunction genChildren(el) {\n  const children = el.children;\n  if (children && children.length > 0) {\n    return `${children.map(c => gen(c)).join(',')}`\n  } else {\n    return false\n  }\n}\n\n\nexport function generate(el) {\n  const children = genChildren(el);\n  let code = `_c(\"${el.tag}\",${el.attrs}${children ? `,${children}` : ''})`\n  return code\n}\n","export function parserHTML(html) {\n\n  let root = null;\n  const stack = [];\n\n  //将解析后的结果组合成ast树 -> stack\n  function createAstElement(tagName, attrs) {\n    return {\n      tag: tagName,\n      type: 1,\n      children: [],\n      parent: null,\n      attrs\n    }\n  }\n\n\n  function start(tagName, attributes) {\n    const parent = stack[stack.length - 1]\n    const element = createAstElement(tagName, attributes)\n    //设置根节点\n    if (!root) {\n      root = element\n    }\n    //放入栈中时 记录自己的父节点\n    element.parent = parent\n    //为这个父节点添加子节点为当前节点\n    if (parent) {\n      parent.children.push(element)\n    }\n    stack.push(element)\n  }\n\n  function end(tagName) {\n    let last = stack.pop();\n    if (last.tag !== tagName) {\n      //闭合标签有误\n      throw new Error('标签有误')\n    }\n  }\n\n  function chars(text) {\n    text = text.replace(/\\s/g, \" \");\n    let parent = stack[stack.length - 1]\n    if (text.trim()) {\n      parent.children.push({\n        type: 3,\n        text\n      })\n    }\n  }\n\n  function advance(len) {\n    html = html.slice(len)\n  }\n\n  //解析节点属性生成节点属性的字符串\n  function parserAttrs(attrs) {\n    attrs = attrs.filter(a => a)\n    let attrStr = \"\";\n    for (let i = 0; i < attrs.length; i++) {\n      const attr = attrs[i];\n      let [attrName, attrValue] = attr.split('=')\n      attrValue = attrValue.replace(/\"/g, '')\n      if (attrName === 'style') {\n        let obj = {};\n        attrValue.split(';').forEach(item => {\n          let [key, value] = item.split(':')\n          if (key) obj[key] = value.replace(/\\s+/g, \"\");\n        })\n        attrValue = obj\n      }\n      attrStr += `${attrName}:${JSON.stringify(attrValue)},`\n    }\n\n    return `{${attrStr.slice(0, -1)}}`\n  }\n\n  function parserStartTag(html) {\n    //不是开始标签\n    if (html.indexOf('</') === 0) return false\n    const end = html.indexOf('>');\n    //拿到标签内容\n    const content = html.slice(1, end)\n    advance(end + 1)\n    //拿到第一个空格的位置\n    const firstSpaceIdx = content.indexOf(' ')\n    let tagName = '', attrStr = ''\n    if (firstSpaceIdx === -1) {\n      //没有找到空格，则将content作为标签\n      tagName = content\n    } else {\n      //找到了空格则到第一个空格之前的是标签名\n      tagName = content.slice(0, firstSpaceIdx)\n      attrStr = content.slice(firstSpaceIdx + 1)\n    }\n\n    //处理style\n    const styleIdx = attrStr.indexOf('style')\n    let styleStr;\n    if (styleIdx !== -1) {\n      styleStr = attrStr.slice(styleIdx, attrStr.length - 1)\n      attrStr = attrStr.slice(0, styleIdx)\n    }\n\n    const attrArr = attrStr ? attrStr.trim().split(' ') : [];\n\n    //解析成一个属性字符串\n    const attrs = parserAttrs([...attrArr, styleStr])\n    return {\n      tagName,\n      attrs\n    }\n  }\n\n  function parserEndTag(html) {\n    const end = html.indexOf('>')\n    const tagStart = html.indexOf('/');\n    const tagEnd = html.indexOf('>');\n    const tagName = html.slice(tagStart + 1, tagEnd);\n    advance(end + 1)\n    return {\n      tagName\n    }\n  }\n\n  //解析的内容如果存在一直解析\n  while (html) {\n    let textEnd = html.indexOf('<');\n    //解析到开头\n    if (textEnd === 0) {\n      //解析开始标签\n      const startTagMatch = parserStartTag(html);\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs)\n        continue;\n      }\n      const endTagMatch = parserEndTag(html);\n      if (endTagMatch) {\n        end(endTagMatch.tagName);\n        continue;\n      }\n    }\n\n    //文本的处理\n    let text;\n    if (textEnd > 0) {\n      text = html.slice(0, textEnd);\n    }\n\n    if (text) {\n      chars(text)\n      advance(text.length)\n    }\n  }\n\n  return root\n}\n","\nimport { generate } from \"./generate\";\nimport { parserHTML } from \"./parserHTML\";\n\nexport function compileToFunction(template) {\n  //解析字符串 将html转换成ast语法树\n  const root = parserHTML(template);\n  //将ats语法树转换成js语法\n  //<div id=\"app\"></div> -> _c(\"div\",{id:app},\"\")\n  let code = generate(root);\n  //所有的模板引擎实现都需要new Function + with\n  let renderFn = new Function(`with(this){return ${code}}`)\n\n  return renderFn\n}\n","//判断是否为一个对象\nexport function isObject(value) {\n  return typeof value === 'object' && value !== null\n}\n\n\nexport function def(data, key, value) {\n  Object.defineProperty(data, key, {\n    enumerable: false,\n    configurable: false,\n    value\n  })\n}\n\n//_data的值代理到实例上\nexport function proxy(vm,source,key){\n  Object.defineProperty(vm,key,{\n    get(){\n      return vm[source][key]\n    },\n    set(newValue){\n      vm[source][key] = newValue\n    }\n  })\n}\n\n","const oldArrayMethods = Array.prototype;\nexport const arrayMetods = Object.create(oldArrayMethods);\n\n\nconst methods = [\n  'push',\n  'shift',\n  'unshift',\n  'pop',\n  'splice',\n  'reverse'\n]\n\nmethods.forEach(method => {\n  arrayMetods[method] = function (...args) {\n    //调用原生的数组方法\n    const result = oldArrayMethods[method].apply(this, args)\n    let inserted;\n    let ob = this.__ob__;\n\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args;\n        break;\n      case 'splice':\n        inserted = args.slice(2)\n        break;\n      default:\n        break;\n    }\n\n    if (inserted) {\n      ob.observerArray(inserted)\n    }\n    \n    //数组的依赖更新\n    ob.dep.notify()\n    return result\n  }\n})\n","let id = 0\nexport class Dep {\n  constructor(){\n    this.id = id ++\n    this.subs = []\n  }\n  //依赖收集\n  depend(){\n    //观察者模式\n  \n    //让watcher记住当前dep\n    Dep.target.addDep(this)\n    this.subs.push(Dep.target)\n  }\n\n  addSub(watcher){\n    this.subs.push(watcher)\n  }\n\n  //依赖更新\n  notify(){\n    this.subs.forEach(watcher => {\n      watcher.update()\n    })\n  }\n}\n\n//静态属性\nDep.target\n\nlet stack = [];\n//将watcher保留 和移除\nexport function pushTarget(watcher){\n  Dep.target = watcher\n  stack.push(watcher)\n}\n\nexport function popTarget(){\n  stack.pop();\n  Dep.target = stack[stack.length - 1]\n}\n","\nimport { def, isObject } from \"../utils/index\";\nimport { arrayMetods } from \"./array\"\nimport {Dep} from './dep'\n\n\n//将数组中每一部分都取出来数据变化也去更新视图\nfunction dependArray(value){\n  for(let i = 0;i<value.length;i++){\n    const current = value[i];\n    current.__ob__ && current.__ob__.dep.depend()\n\n    if(Array.isArray(current)){\n      dependArray(current)\n    }\n  }\n}\n\nfunction defineReactive(target, key, value) {\n  let dep = new Dep()\n\n  //这里返回的是一个observer的实例当前这value对应的observer\n  const childOb = observe(value);\n  return Object.defineProperty(target, key, {\n    get() {\n      //每个属性都对应着自己的watcher\n      if(Dep.target){\n        //如果当前有watcher\n        dep.depend()\n        if(childOb){\n          //收集了数组的相关依赖\n          childOb.dep.depend()\n\n          //如果数组中还有数组也去收集依赖\n          if(Array.isArray(value)){\n            dependArray(value)\n          }\n        }\n      }\n      return value\n    },\n    set(newValue) {\n      if (value === newValue) return\n      observe(newValue)\n      value = newValue\n\n      dep.notify();//通知依赖的watcher进行更新操作\n    }\n  })\n}\n\nclass Observer {\n  constructor(value) {\n    //数组的依赖\n    this.dep = new Dep()\n    //缺点:vue2中如果层次过多，那么需要递归的解析对象属性\n    def(value, '__ob__', this);\n    if (Array.isArray(value)) {\n      //如果数组下放对象则劫持\n      value.__proto__ = arrayMetods\n      this.observerArray(value);\n    } else {\n      this.walk(value);\n    }\n  }\n\n  walk(data) {\n    Object.keys(data).forEach(key => {\n      const value = data[key]\n      defineReactive(data, key, value)\n    })\n  }\n\n  observerArray(value) {\n    value.forEach(v => {\n      observe(v)\n    })\n  }\n}\n\nexport function observe(data) {\n  if (!isObject(data)) {\n    return\n  }\n\n  //观测数据\n return new Observer(data)\n}\n","\nimport { observe } from \"./observer/index\";\nimport { proxy } from \"./utils/index\";\n\nexport function initState(vm) {\n  const opts = vm.$options;\n  if (opts.props) {\n    initProps(vm)\n  }\n  if (opts.methods) {\n    initMethods(vm)\n  }\n  if (opts.data) {\n    initData(vm)\n  }\n  if (opts.computed) {\n    initComputed(vm)\n  }\n  if (opts.watch) {\n    initWatch(vm)\n  }\n}\n\n\nfunction initProps(vm) { }\nfunction initMethods(vm) { }\nfunction initData(vm) {\n  //数据初始化\n  let data = vm.$options.data;\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data;\n  //对象劫持\n  //MVVM 数据驱动视图\n\n  for(let key in data){\n    proxy(vm,\"_data\",key)\n  }\n\n  observe(data);\n}\nfunction initComputed(vm) { }\nfunction initWatch(vm) { }\n","let callbacks = []\n\nlet waiting = false;\nfunction flushCallback() {\n  callbacks.forEach(cb => cb())\n  waiting = false\n  callbacks = []\n}\n\n// 多次调用nextTick 如果没有刷新的时候就先放到数组中\n// 刷新后更改waiting\nexport function nextTick(cb) {\n  callbacks.push(cb)\n  if (waiting === false) {\n    setTimeout(flushCallback, 0)\n    waiting = true\n  }\n}\n","let queue = [];\nlet has = {};\nimport { nextTick } from \"./utils/nextTick\";\n\nfunction flushSchedularQueue(){\n  queue.forEach(watcher => watcher.run())\n  queue = [] //下一次可以继续执行\n  has = {}\n}\n\nexport function queueWatcher(watcher) {\n  const id = watcher.id;\n  if (has[id] == null) {\n    queue.push(watcher)\n    has[id] = true\n\n\n    //宏任务和微任务向下兼容\n    //Vue.nextTick = promise.then -> mutationObserver -> setImmediate -> setTimeout\n    nextTick(flushSchedularQueue)\n  }\n}\n","import { popTarget, pushTarget } from \"./dep\";\n\nimport { queueWatcher } from \"./../schedular\";\n\nlet id = 0\nclass Watcher {\n  constructor(vm, expOrFn, fn, callback, options) {\n    this.vm = vm;\n    this.callback = callback;\n    this.fn = fn;\n    this.options = options;\n    this.depsId = new Set()\n    this.id = id++\n    //传入的回调函数放到getter属性上\n    this.getter = expOrFn;\n    this.deps = []\n    this.get()\n  }\n  get() {\n    pushTarget(this)//把watcher存起来\n    this.getter()\n    popTarget() //移除watcher\n  }\n  addDep(dep) {\n    //watcher里不能放重复的dep\n    //dep也不能放重复的watcher\n    let id = dep.id\n    if (!this.depsId.has(id)) {\n      this.depsId.add(id)\n      this.deps.push(dep)\n\n      dep.addSub(this)\n    }\n  }\n  update() {\n    //等待一起更新 因为每次调用update的时候都放入了watcher\n    // this.get()\n    queueWatcher(this)\n  }\n\n  run() {\n    this.get()\n  }\n}\n\nexport default Watcher\n","\n/**\n * 老节点和新节点做比对diff\n*/\nexport function patch(oldVnode, vnode) {\n  if (!oldVnode) {\n    //组件的挂载\n    return createElm(vnode)\n  } else {\n    //判断更新还是渲染\n    const isRealElement = oldVnode.nodeType;\n    if (isRealElement) {\n      console.log('当前旧节点是真实节点,进入首次渲染')\n      //初次渲染\n      const oldElm = oldVnode;\n      const parentElm = oldElm.parentNode // body\n      let el = createElm(vnode)\n      //挂载\n      parentElm.insertBefore(el, oldElm.nextSibling)\n      //删除旧的节点\n      parentElm.removeChild(oldElm)\n\n      return el\n    }\n  }\n\n  //递归创建真实节点，替换掉老的节点\n}\n\n//更新属性\nfunction updatePropertys(vnode) {\n  const newProps = vnode.data || {};\n  const el = vnode.el;\n  for (let key in newProps) {\n    if (key === 'style') {\n      for (let styleName in newProps.style) {\n        el.style[styleName] = newProps.style[styleName]\n      }\n    } else if (key === 'class') {\n      el.class = newProps.class\n    } else {\n      el.setAttribute(key, newProps[key])\n    }\n  }\n}\n\n\n//创建组件的真实节点\nfunction createComponent(vnode) { //初始化组件\n  //创建组件的实例\n  let i = vnode.data\n  if ((i = i.hooks) && (i = i.init)) {\n    i(vnode)\n  }\n\n  if(vnode.componentInstance){\n    return true\n  }\n}\n\n\n//根据虚拟节点创建真实的节点\nfunction createElm(vnode) {\n  const { tag, children, key, data, text } = vnode\n  //区分标签和文本\n  if (typeof tag === 'string') {\n\n    //tag为字符串的情况也有可能是组件标签\n\n    //实例化组件\n    if (createComponent(vnode)) {\n      return vnode.componentInstance.$el\n    }\n\n    vnode.el = document.createElement(tag);\n    updatePropertys(vnode)\n    children.forEach(child => {\n      //递归创建儿子节点，将儿子节点放入父节点中\n      return vnode.el.appendChild(createElm(child))\n    })\n  } else {\n    //虚拟dom上映射着真实dom方便获取更新操作\n    vnode.el = document.createTextNode(text)\n  }\n\n  return vnode.el\n}\n","\nimport Watcher from \"./observer/watcher\";\nimport { patch } from \"./vdom/patch\";\n\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function (vnode) {\n    const vm = this;\n    vm.$el = patch(vm.$el, vnode)\n  }\n}\n\nexport function mountComponent(vm, el) {\n  vm.$el = el //真实的dom元素\n\n  callHook(vm, \"beforeMount\")\n  //渲染还是更新都会调用这个方法\n  let updateComponent = () => {\n    //返回虚拟dom\n    vm._update(vm._render())\n  }\n\n  //每个组件一定有一个渲染watcher\n  //渲染watcher\n  //true表示是一个渲染watcher\n  new Watcher(vm, updateComponent, () => { }, true)\n  callHook(vm, \"mounted\")\n}\n\n\nexport function callHook(vm, hook) {\n  const handlers = vm.$options[hook]\n  if(!handlers) return\n  //找到对应的钩子调用\n  for (let i = 0; i < handlers.length; i++) {\n    handlers[i].call(vm)\n  }\n}\n","const strats = {}\n\n//生命周期的合并策略\nconst LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDistory',\n  'distoryed'\n]\n\n\nLIFECYCLE_HOOKS.forEach(hook => {\n  strats[hook] = mergeHook\n})\n\nfunction mergeHook(parentVal,childVal){\n  if(childVal){\n    if(parentVal){\n      //父子选项都存在\n      //返回一个数组 子选项在前:先执行子选项\n      return parentVal.concat(childVal)\n    }else{\n      //父选项不存在 返回子选项\n      return [childVal]\n    }\n  }else{\n    //如果子选项不存在 直接返回父选项\n    return parentVal\n  }\n}\n\n\n//组件的合并策略\nstrats.components = mergeAssets\nfunction mergeAssets(parentVal,childVal){\n  //基于父类创建出一个原型 res.__proto__\n  //这样合并完成后子组件就会先找自己的components在去沿着原型链找父类\n  const res = Object.create(parentVal);\n  if(childVal){\n    for(let key in childVal){\n      res[key] = childVal[key]\n    }\n  }\n\n  return res\n}\n\nexport function mergeOptions(parent,child){\n  const options = {};\n\n  for(let key in parent){\n    mergeField(key)\n  }\n\n  for(let key in child){\n    //如果已经合并过的就没有必要在合并了\n    if(!options.hasOwnProperty[key]){\n      mergeField(key)\n    }\n  }\n\n  //默认的合并策略 但是有些属性合并有特殊的方式比如:生命周期\n  function mergeField(key){\n    if(strats[key]){\n      //当前有符合合并策略的选项\n      return options[key] = strats[key](parent[key],child[key])\n    }\n    if(typeof parent[key]  === 'object' && typeof child[key] === 'object'){\n      //父子选项都是object\n      options[key] = {\n        ...parent[key],\n        ...child[key]\n      }\n    }else if(child[key] == null){\n      //子选项为null 以父选项为准   \n      options[key] = parent[key]\n    }else{\n      //父子都有该选项 且父子选项都不是object类型 以子选项为准\n      options[key] = child[key]\n    }\n  }\n\n  // if(options._isComponent){\n  //   console.log(options,child,parent)\n  // }\n  return options\n}\n","\nimport { compileToFunction } from \"./compiler/index\";\nimport { initState } from \"./state\";\n\nimport { callHook, mountComponent } from \"./lifecycle\"\nimport { mergeOptions } from \"./utils/merge\";\nimport { nextTick } from \"./utils/nextTick\";\n\n//在原型添加一个init方法\nexport function initMixin(Vue) {\n  //初始化流程\n  Vue.prototype._init = function (options) {\n\n    //数据劫持\n    const vm = this;\n    //将用户传递的和全局的做合并\n    vm.$options = mergeOptions(vm.constructor.options, options);\n    //这里调用里beforeCreate 这个阶段合并了选项 但是还没有执行initState 所有数据还没有被观察\n    callHook(vm, \"beforeCreate\")\n    //初始化状态\n    initState(vm);\n    //这里调用里created 已经初始化了状态 可以访问响应式数据 以及其它类似computed methods ..的选项也已经完成了初始化\n    callHook(vm, \"created\")\n\n    if (vm.$options.el) {\n      //数据挂载到模板 \n      vm.$mount(vm.$options.el);\n    }\n  }\n\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    const options = vm.$options;\n    console.log(options)\n    el = document.querySelector(el);\n    //模板转换成渲染函数\n    if (!options.render) {\n      //没有render找template\n      let template = options.template;\n      if (!template && el) {\n        //没有template 取el的内容作为模板\n        template = el.outerHTML\n      }\n      let render = compileToFunction(template);\n      options.render = render\n    }\n\n    mountComponent(vm, el);\n  }\n\n  //用户内部调用的nextTick\n  Vue.prototype.$nextTick = nextTick\n}\n","export function isReservedTag(tagName){\n  const reservedTag = 'div,p,input,select,span';\n  const has = {};\n\n  reservedTag.split(\",\").forEach(tag => {\n    has[tag] = true\n  })\n\n  return has[tagName]\n}\n","import { isObject } from \"../utils/index\";\nimport { isReservedTag } from \"../utils/isReservedTag\";\n\nexport function createElement(vm, tag, data = {}, ...children) {\n  let key = data.key;\n  if (key) {\n    delete data.key\n  }\n\n  if (isReservedTag(tag)) { //html的原生标签\n    return vnode(tag, data, key, children, undefined)\n  } else {\n    //找到组件的定义 -> 子组件的构造函数\n    const Ctor = vm.$options.components[tag]\n\n    return createComponent(vm, tag, data, key, children, Ctor)\n  }\n\n}\n\n//创建组件的虚拟节点\nfunction createComponent(vm, tag, data, key, children, Ctor) {\n  if (isObject(Ctor)) {\n    Ctor = vm.$options._base.extend(Ctor)\n  }\n\n  //组件钩子\n  data.hooks = {\n    init(vnode) {\n      let child = vnode.componentInstance = new Ctor({ _isComponent: true })\n      console.log(child)\n      child.$mount()\n    }\n  }\n\n  return vnode(`vue-component-${Ctor.cid}-${tag}`, data, key, undefined, {\n    Ctor,\n    children\n  })\n}\n\nexport function createTextNode(vm, text) {\n  return vnode(undefined, undefined, undefined, undefined, text)\n}\n\n\n//生成虚拟节点  虚拟节点 -> 用js描述dom元素\n\n// 将template转换成ast -> 生成render方法 -> 生成虚拟dom -> 生成真实dom\n\n//页面更新重新生成虚拟dom -> 更新dom\n\nfunction vnode(tag, data, key, children, text, componentOptions) {\n  return {\n    tag,\n    data,\n    key,\n    children,\n    text,\n    componentOptions\n  }\n}\n","\nimport { createElement, createTextNode } from \"./vdom/createElement\"\n\nexport function renderMixin(Vue) {\n  // _c是创建元素的虚拟节点\n  // _v创建文本的虚拟节点\n  // _sJSON.stringify()\n  Vue.prototype._c = function () {\n    // tag data children\n    return createElement(this,...arguments)\n  }\n\n  Vue.prototype._v = function (text) {\n    return createTextNode(this,text)\n  }\n\n  Vue.prototype._s = function (value) {\n    return value === null ? '' : (typeof value === 'object' ? JSON.stringify(value) : value)\n  }\n\n  Vue.prototype._render = function () {\n    const vm = this;\n    const { render } = vm.$options\n    //实例上取值\n    const vnode = render.call(vm)\n\n    return vnode\n  }\n}\n","export const ASSETS_TYPE = [\n  'component',\n  'filter',\n  'directive',\n  'mixin'\n]\n","import { ASSETS_TYPE } from \"./const\";\n\nexport function initAssetsRegister(Vue){\n  ASSETS_TYPE.forEach(type => {\n    Vue[type] = function(id,definition){\n      switch(type){\n        case 'component':\n            //使用extned方法 将对象变成构造函数\n            //子类(子组件也有可能有component方法)\n            definition = this.options._base.extend(definition)\n          break;\n        case 'filter':\n          break\n        case 'mixin':\n          break\n        case 'directive':\n          break\n      }\n\n      this.options[type + 's'][id] = definition\n\n    }\n  })\n}\n","import { mergeOptions } from \"../utils/merge\";\n\nexport function initExtend(Vue) {\n\n  //子类和父类 对应子组件和父组件\n  //创建子类继承于父类宽展的时候都扩展到自己的属性上\n  let cid = 0;\n  Vue.extend = function (opts) { // extend方法就是产生一个继承于Vue的类\n    // 并且身上应该有父类的所有功能 \n    const Super = this\n    const Sub = function VueComponent(options) {\n      this._init(options);\n    }\n    // 原型继承\n    Sub.prototype = Object.create(Super.prototype);\n    Sub.prototype.constructor = Sub;\n    Sub.options = mergeOptions(Super.options, opts);// 只和Vue.options合并\n    Sub.cid = cid++\n    return Sub;\n  }\n}\n","export function initMixin(Vue){\n  Vue.mixin = function(mixin){\n    this.options = mergeOptions(this.options,mixin)\n  }\n}\n","import { initAssetsRegister } from './assets'\nimport { ASSETS_TYPE } from './const'\nimport { initExtend } from './initExtend'\nimport { initMixin } from './mixin'\nexport function initGolbalAPI(Vue){\n  //整合了全局相关的内容\n  Vue.options = {}\n  initMixin(Vue)\n\n  //初始化全局过滤器指令都放在options上\n  ASSETS_TYPE.forEach(type => {\n    Vue.options[type + 's'] = {}\n  })\n\n  //_base是Vue的构造函数\n  Vue.options._base = Vue\n  //注册extend方法\n  initAssetsRegister(Vue)\n  initExtend(Vue)\n}\n","import { initMixin } from \"./init\";\nimport { renderMixin } from \"./render\";\nimport { lifecycleMixin } from './lifecycle'\nimport { initGolbalAPI } from \"./initGlobalAPI/index\";\n//核心\nfunction Vue(options) {\n  //进行初始化\n  this._init(options)\n\n}\n\ninitMixin(Vue)\nrenderMixin(Vue)\nlifecycleMixin(Vue)\n\ninitGolbalAPI(Vue)\nexport default Vue\n"],"names":["gen","node","type","generate","text","tokens","trim","textEndIndex","indexOf","execEndIndex","push","slice","JSON","stringify","join","genChildren","el","children","length","map","c","code","tag","attrs","parserHTML","html","root","stack","createAstElement","tagName","parent","start","attributes","element","end","last","pop","Error","chars","replace","advance","len","parserAttrs","filter","a","attrStr","i","attr","split","attrName","attrValue","obj","forEach","item","key","value","parserStartTag","content","firstSpaceIdx","styleIdx","styleStr","attrArr","parserEndTag","tagStart","tagEnd","textEnd","startTagMatch","endTagMatch","compileToFunction","template","renderFn","Function","isObject","def","data","Object","defineProperty","enumerable","configurable","proxy","vm","source","get","set","newValue","oldArrayMethods","Array","prototype","arrayMetods","create","methods","method","args","result","apply","inserted","ob","__ob__","observerArray","dep","notify","id","Dep","subs","target","addDep","watcher","update","pushTarget","popTarget","dependArray","current","depend","isArray","defineReactive","childOb","observe","Observer","__proto__","walk","keys","v","initState","opts","$options","props","initData","computed","watch","_data","call","callbacks","waiting","flushCallback","cb","nextTick","setTimeout","queue","has","flushSchedularQueue","run","queueWatcher","Watcher","expOrFn","fn","callback","options","depsId","Set","getter","deps","add","addSub","patch","oldVnode","vnode","createElm","isRealElement","nodeType","console","log","oldElm","parentElm","parentNode","insertBefore","nextSibling","removeChild","updatePropertys","newProps","styleName","style","setAttribute","createComponent","hooks","init","componentInstance","$el","document","createElement","child","appendChild","createTextNode","lifecycleMixin","Vue","_update","mountComponent","callHook","updateComponent","_render","hook","handlers","strats","LIFECYCLE_HOOKS","mergeHook","parentVal","childVal","concat","components","mergeAssets","res","mergeOptions","mergeField","hasOwnProperty","initMixin","_init","constructor","$mount","querySelector","render","outerHTML","$nextTick","isReservedTag","reservedTag","undefined","Ctor","_base","extend","_isComponent","cid","componentOptions","renderMixin","_c","arguments","_v","_s","ASSETS_TYPE","initAssetsRegister","definition","initExtend","Super","Sub","VueComponent","mixin","initGolbalAPI"],"mappings":"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"}