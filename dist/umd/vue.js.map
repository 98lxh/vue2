{"version":3,"file":"vue.js","sources":["../../src/compiler/parserHTML.js","../../src/compiler/index.js","../../src/utils/index.js","../../src/observer/array.js","../../src/observer/index.js","../../src/state.js","../../src/observer/watcher.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/createElement.js","../../src/render.js","../../src/index.js"],"sourcesContent":["\nlet root = null;\nconst stack = [];\n\n//将解析后的结果组合成ast树 -> stack\nfunction createAstElement(tagName, attrs) {\n  return {\n    tag: tagName,\n    type: 1,\n    children: [],\n    parent: null,\n    attrs\n  }\n}\n\n\nexport function parserHTML(html) {\n\n  function start(tagName, attributes) {\n    const parent = stack[stack.length - 1]\n    const element = createAstElement(tagName, attributes)\n    //设置根节点\n    if (!root) {\n      root = element\n    }\n    //放入栈中时 记录自己的父节点\n    element.parent = parent\n    //为这个父节点添加子节点为当前节点\n    if (parent) {\n      parent.children.push(element)\n    }\n    stack.push(element)\n  }\n\n  function end(tagName) {\n    let last = stack.pop();\n    if (last.tag !== tagName) {\n      //闭合标签有误\n      throw new Error('标签有误')\n    }\n  }\n\n  function chars(text) {\n    text = text.replace(/\\s/g, \" \");\n    let parent = stack[stack.length - 1]\n    if (text.trim()) {\n      parent.children.push({\n        type: 3,\n        text\n      })\n    }\n  }\n\n  function advance(len) {\n    html = html.slice(len)\n  }\n\n  //解析节点属性生成节点属性的字符串\n  function parserAttrs(attrs) {\n    attrs = attrs.filter(a => a)\n    let attrStr = \"\";\n    for (let i = 0; i < attrs.length; i++) {\n      const attr = attrs[i];\n      let [attrName, attrValue] = attr.split('=')\n      attrValue = attrValue.replace(/\"/g, '')\n      if (attrName === 'style') {\n        let obj = {};\n        attrValue.split(';').forEach(item => {\n          let [key, value] = item.split(':')\n          if (key) obj[key] = value.replace(/\\s+/g, \"\");\n        })\n        attrValue = obj\n      }\n      attrStr += `${attrName}:${JSON.stringify(attrValue)},`\n    }\n\n    return `{${attrStr.slice(0, -1)}}`\n  }\n\n  function parserStartTag(html) {\n    //不是开始标签\n    if (html.indexOf('</') === 0) return false\n    const end = html.indexOf('>');\n    //拿到标签内容\n    const content = html.slice(1, end)\n    advance(end + 1)\n    //拿到第一个空格的位置\n    const firstSpaceIdx = content.indexOf(' ')\n    let tagName = '', attrStr = ''\n    if (firstSpaceIdx === -1) {\n      //没有找到空格，则将content作为标签\n      tagName = content\n    } else {\n      //找到了空格则到第一个空格之前的是标签名\n      tagName = content.slice(0, firstSpaceIdx)\n      attrStr = content.slice(firstSpaceIdx + 1)\n    }\n\n    //处理style\n    const styleIdx = attrStr.indexOf('style')\n    let styleStr;\n    if (styleIdx !== -1) {\n      styleStr = attrStr.slice(styleIdx, attrStr.length - 1)\n      attrStr = attrStr.slice(0, styleIdx)\n    }\n\n    const attrArr = attrStr ? attrStr.trim().split(' ') : [];\n\n    //解析成一个属性字符串\n    const attrs = parserAttrs([...attrArr, styleStr])\n    return {\n      tagName,\n      attrs\n    }\n  }\n\n  function parserEndTag(html) {\n    const end = html.indexOf('>')\n    const tagStart = html.indexOf('/');\n    const tagEnd = html.indexOf('>');\n    const tagName = html.slice(tagStart + 1, tagEnd);\n    advance(end + 1)\n    return {\n      tagName\n    }\n  }\n\n  //解析的内容如果存在一直解析\n  while (html) {\n    let textEnd = html.indexOf('<');\n    //解析到开头\n    if (textEnd === 0) {\n      //解析开始标签\n      const startTagMatch = parserStartTag(html);\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs)\n        continue;\n      }\n      const endTagMatch = parserEndTag(html);\n      if (endTagMatch) {\n        end(endTagMatch.tagName);\n        continue;\n      }\n    }\n\n    //文本的处理\n    let text;\n    if (textEnd > 0) {\n      text = html.slice(0, textEnd);\n    }\n\n    if (text) {\n      chars(text)\n      advance(text.length)\n    }\n  }\n\n  return root\n}\n","\nimport { parserHTML } from \"./parserHTML\";\n\nfunction gen(node) {\n  if (node.type === 1) {\n    //元素节点\n    return generate(node)\n  } else {\n    //文本\n    let text = node.text;\n    const tokens = [];\n    while (text.trim()) {\n      //文本的结束位置\n      const textEndIndex = text.indexOf(\"{{\")\n      if (textEndIndex === 0) {\n        //表达式的结束位置\n        const execEndIndex = text.indexOf(\"}}\")\n        tokens.push(`_s(${text.slice(textEndIndex + 2, execEndIndex)})`)\n        text = text.slice(execEndIndex + 2)\n      } else {\n        tokens.push(JSON.stringify(text.slice(0, textEndIndex)))\n        text = text.slice(textEndIndex)\n      }\n    }\n    return `_v(${tokens.join(\"+\")})`\n  }\n}\n\nfunction genChildren(el) {\n  const children = el.children;\n  if (children && children.length > 0) {\n    return `${children.map(c => gen(c)).join(',')}`\n  } else {\n    return false\n  }\n}\n\nfunction generate(el) {\n  const children = genChildren(el);\n  let code = `_c(\"${el.tag}\",${el.attrs}${children ? `,${children}` : ''})`\n\n  return code\n}\n\n\nexport function compileToFunction(template) {\n  //解析字符串 将html转换成ast语法树\n  const root = parserHTML(template);\n  //将ats语法树转换成js语法\n  //<div id=\"app\"></div> -> _c(\"div\",{id:app},\"\")\n  let code = generate(root);\n  //所有的模板引擎实现都需要new Function + with\n  let renderFn = new Function(`with(this){return ${code}}`)\n\n  return renderFn\n}\n","//判断是否为一个对象\nexport function isObject(value) {\n  return typeof value === 'object' && value !== null\n}\n\n\nexport function def(data, key, value) {\n  Object.defineProperty(data, key, {\n    enumerable: false,\n    configurable: false,\n    value\n  })\n}\n\n//_data的值代理到实例上\nexport function proxy(vm,source,key){\n  Object.defineProperty(vm,key,{\n    get(){\n      return vm[source][key]\n    },\n    set(newValue){\n      vm[source][key] = newValue\n    }\n  })\n}\n","const oldArrayMethods = Array.prototype;\nexport const arrayMetods = Object.create(oldArrayMethods);\n\n\nconst methods = [\n  'push',\n  'shift',\n  'unshift',\n  'pop',\n  'splice',\n  'reverse'\n]\n\nmethods.forEach(method => {\n  arrayMetods[method] = function (...args) {\n    //调用原生的数组方法\n    const result = oldArrayMethods[method].apply(this, args)\n    let inserted;\n    let ob = this.__ob__;\n\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args;\n        break;\n      case 'splice':\n        inserted = args.slice(2)\n        break;\n      default:\n        break;\n    }\n\n    if (inserted) {\n      ob.observerArray(inserted)\n    }\n\n    return result\n  }\n})\n","\nimport { def, isObject } from \"../utils/index\";\nimport { arrayMetods } from \"./array\"\n\nfunction defineReactive(target, key, value) {\n  observe(value);\n  return Object.defineProperty(target, key, {\n    get() {\n      /**\n       * todo:依赖收集\n      */\n      return value\n    },\n    set(newValue) {\n      if (value === newValue) return\n      observe(newValue)\n      /**\n       * todo:依赖更新\n      */\n      value = newValue\n    }\n  })\n}\n\nclass Observer {\n  constructor(value) {\n    //缺点:vue2中如果层次过多，那么需要递归的解析对象属性\n    def(value, '__ob__', this);\n    if (Array.isArray(value)) {\n      //如果数组下放对象则劫持\n      value.__proto__ = arrayMetods\n      this.observerArray(value);\n    } else {\n      this.walk(value);\n    }\n  }\n\n  walk(data) {\n    Object.keys(data).forEach(key => {\n      const value = data[key]\n      defineReactive(data, key, value)\n    })\n  }\n\n  observerArray(value) {\n    value.forEach(v => {\n      observe(v)\n    })\n  }\n}\n\nexport function observe(data) {\n  if (!isObject(data)) {\n    return data\n  }\n\n  //观测数据\n  new Observer(data)\n}\n","\nimport { observe } from \"./observer/index\";\nimport { proxy } from \"./utils/index\";\n\nexport function initState(vm) {\n  const opts = vm.$options;\n  if (opts.props) {\n    initProps(vm)\n  }\n  if (opts.methods) {\n    initMethods(vm)\n  }\n  if (opts.data) {\n    initData(vm)\n  }\n  if (opts.computed) {\n    initComputed(vm)\n  }\n  if (opts.watch) {\n    initWatch(vm)\n  }\n}\n\n\nfunction initProps(vm) { }\nfunction initMethods(vm) { }\nfunction initData(vm) {\n  //数据初始化\n  let data = vm.$options.data;\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data;\n  //对象劫持\n  //MVVM 数据驱动视图\n\n  for(let key in data){\n    proxy(vm,\"_data\",key)\n  }\n\n  observe(data);\n}\nfunction initComputed(vm) { }\nfunction initWatch(vm) { }\n","class Watcher {\n  constructor(vm, expOrFn, fn, callback, options) {\n    this.vm = vm;\n    this.callback = callback;\n    this.fn = fn;\n    this.options = options;\n\n    //传入的回调函数放到getter属性上\n    this.getter = expOrFn;\n\n    this.get()\n  }\n  get() {\n    this.getter()\n  }\n}\n\nexport default Watcher\n","\n/**\n * 老节点和新节点做比对diff\n*/\nexport function patch(oldVnode, vnode) {\n  //判断更新还是渲染\n  const isRealElement = oldVnode.nodeType;\n  if (isRealElement) {\n    console.log('当前旧节点是真实节点,进入首次渲染')\n    //初次渲染\n    const oldElm = oldVnode;\n    const parentElm = oldElm.parentNode // body\n    let el = createElm(vnode)\n    //挂载\n    parentElm.insertBefore(el, oldElm.nextSibling)\n    //删除旧的节点\n    parentElm.removeChild(oldElm)\n  }\n\n  //递归创建真实节点，替换掉老的节点\n}\n\n//更新属性\nfunction updatePropertys(vnode) {\n  const newProps = vnode.data || {};\n  const el = vnode.el;\n  for (let key in newProps) {\n    if (key === 'style') {\n      for (let styleName in newProps.style) {\n        el.style[styleName] = newProps.style[styleName]\n      }\n    } else if (key === 'class') {\n      el.class = newProps.class\n    } else {\n      el.setAttribute(key, newProps[key])\n    }\n  }\n}\n\n\n//根据虚拟节点创建真实的节点\nfunction createElm(vnode) {\n  const { tag, children, key, data, text } = vnode\n  //区分标签和文本\n  if (typeof tag === 'string') {\n    vnode.el = document.createElement(tag);\n    updatePropertys(vnode)\n    children.forEach(child => {\n      //递归创建儿子节点，将儿子节点放入父节点中\n      return vnode.el.appendChild(createElm(child))\n    })\n  } else {\n    //虚拟dom上映射着真实dom方便获取更新操作\n    vnode.el = document.createTextNode(text)\n  }\n\n  return vnode.el\n}\n","\nimport Watcher from \"./observer/watcher\";\nimport { patch } from \"./vdom/patch\";\n\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function (vnode) {\n    const vm = this;\n    vm.$el = patch(vm.$el, vnode)\n  }\n}\n\nexport function mountComponent(vm, el) {\n  const options = vm.$options;\n  vm.$el = el //真实的dom元素\n\n  //渲染还是更新都会调用这个方法\n  let updateComponent = () => {\n    //返回虚拟dom\n    vm._update(vm._render())\n  }\n\n  //每个组件一定有一个渲染watcher\n  //渲染watcher\n  //true表示是一个渲染watcher\n  new Watcher(vm, updateComponent, () => { }, true)\n}\n","\nimport { compileToFunction } from \"./compiler/index\";\nimport { initState } from \"./state\";\n\nimport { mountComponent } from \"./lifecycle\"\n\n//在原型添加一个init方法\nexport function initMixin(Vue) {\n  //初始化流程\n  Vue.prototype._init = function (options) {\n\n    //数据劫持\n    const vm = this;\n    vm.$options = options;\n\n    //初始化状态\n    initState(vm);\n\n    if (vm.$options.el) {\n      //数据挂载到模板 \n      vm.$mount(vm.$options.el);\n    }\n  }\n\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    const options = vm.$options;\n    el = document.querySelector(el);\n    //模板转换成渲染函数\n    if (!options.render) {\n      //没有render找template\n      let template = options.template;\n      if (!template && el) {\n        //没有template 取el的内容作为模板\n        template = el.outerHTML\n        let render = compileToFunction(template);\n        options.render = render\n      }\n    }\n\n    mountComponent(vm, el);\n  }\n}\n","export function createElement(tag, data = {}, ...children) {\n  let key = data.key;\n  if (key) {\n    delete data.key\n  }\n  return vnode(tag, data, key, children, undefined)\n}\n\nexport function createTextNode(text) {\n  return vnode(undefined, undefined, undefined, undefined, text)\n}\n\n\n//生成虚拟节点  虚拟节点 -> 用js描述dom元素\n\n// 将template转换成ast -> 生成render方法 -> 生成虚拟dom -> 生成真实dom\n\n//页面更新重新生成虚拟dom -> 更新dom\n\nfunction vnode(tag, data, key, children, text) {\n  return {\n    tag,\n    data,\n    key,\n    children,\n    text\n  }\n}\n","\nimport { createElement, createTextNode } from \"./vdom/createElement\"\n\nexport function renderMixin(Vue) {\n  // _c是创建元素的虚拟节点\n  // _v创建文本的虚拟节点\n  // _sJSON.stringify()\n  Vue.prototype._c = function () {\n    // tag data children\n    return createElement(...arguments)\n  }\n\n  Vue.prototype._v = function (text) {\n    return createTextNode(text)\n  }\n\n  Vue.prototype._s = function (value) {\n    return value === null ? '' : (typeof value === 'object' ? JSON.stringify(value) : value)\n  }\n\n  Vue.prototype._render = function () {\n    const vm = this;\n    const { render } = vm.$options\n    //实例上取值\n    const vnode = render.call(vm)\n\n    return vnode\n  }\n}\n","import { initMixin } from \"./init\";\nimport { renderMixin } from \"./render\";\nimport { lifecycleMixin } from './lifecycle'\n//核心\nfunction Vue(options) {\n  //进行初始化\n  this._init(options)\n\n}\n\ninitMixin(Vue)\nrenderMixin(Vue)\nlifecycleMixin(Vue)\n\nexport default Vue\n"],"names":["root","stack","createAstElement","tagName","attrs","tag","type","children","parent","parserHTML","html","start","attributes","length","element","push","end","last","pop","Error","chars","text","replace","trim","advance","len","slice","parserAttrs","filter","a","attrStr","i","attr","split","attrName","attrValue","obj","forEach","item","key","value","JSON","stringify","parserStartTag","indexOf","content","firstSpaceIdx","styleIdx","styleStr","attrArr","parserEndTag","tagStart","tagEnd","textEnd","startTagMatch","endTagMatch","gen","node","generate","tokens","textEndIndex","execEndIndex","join","genChildren","el","map","c","code","compileToFunction","template","renderFn","Function","isObject","def","data","Object","defineProperty","enumerable","configurable","proxy","vm","source","get","set","newValue","oldArrayMethods","Array","prototype","arrayMetods","create","methods","method","args","result","apply","inserted","ob","__ob__","observerArray","defineReactive","target","observe","Observer","isArray","__proto__","walk","keys","v","initState","opts","$options","props","initData","computed","watch","_data","call","Watcher","expOrFn","fn","callback","options","getter","patch","oldVnode","vnode","isRealElement","nodeType","console","log","oldElm","parentElm","parentNode","createElm","insertBefore","nextSibling","removeChild","updatePropertys","newProps","styleName","style","setAttribute","document","createElement","child","appendChild","createTextNode","lifecycleMixin","Vue","_update","$el","mountComponent","updateComponent","_render","initMixin","_init","$mount","querySelector","render","outerHTML","undefined","renderMixin","_c","arguments","_v","_s"],"mappings":"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"}