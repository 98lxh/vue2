{"version":3,"file":"vue.js","sources":["../../src/compiler/index.js","../../src/utils/index.js","../../src/observer/array.js","../../src/observer/index.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["//将解析后的结果组合成ast树 -> stack\nfunction createAstElement(tagName, attrs) {\n  return {\n    tag: tagName,\n    type: 1,\n    children: [],\n    parent: null,\n    attrs\n  }\n}\n\n\nlet root = null;\nconst stack = [];\nfunction parserHTML(html) {\n\n  function start(tagName, attributes) {\n    const parent = stack[stack.length - 1]\n    const element = createAstElement(tagName, attributes)\n    //设置根节点\n    if (!root) {\n      root = element\n    }\n    //放入栈中时 记录自己的父节点\n    element.parent = parent\n    //为这个父节点添加子节点为当前节点\n    if (parent) {\n      parent.children.push(element)\n    }\n    stack.push(element)\n  }\n\n  function end(tagName) {\n    let last = stack.pop();\n    if (last.tag !== tagName) {\n      //闭合标签有误\n      throw new Error('标签有误')\n    }\n  }\n\n  function chars(text) {\n    text = text.replace(/\\s/g, \" \");\n    let parent = stack[stack.length - 1]\n    if (text) {\n      parent.children.push({\n        type: 3,\n        text\n      })\n    }\n  }\n\n  function advance(len) {\n    html = html.slice(len)\n  }\n\n  //解析节点的属性\n  function parserAttrs(attrs) {\n    const attrMap = {};\n    for (let i = 0; i < attrs.length; i++) {\n      const attr = attrs[i];\n      const [attrName, attrValue] = attr.split('=')\n      attrMap[attrName] = attrValue\n    }\n    return attrMap\n  }\n\n  function parserStartTag(html) {\n    //不是开始标签\n    if (html.indexOf('</') === 0) return false\n    const end = html.indexOf('>');\n    //拿到标签内容\n    const content = html.slice(1, end)\n    advance(end + 1)\n    //拿到第一个空格的位置\n    const firstSpaceIdx = content.indexOf(' ')\n    let tagName = '', attrStr = ''\n    if (firstSpaceIdx === -1) {\n      //没有找到空格，则将content作为标签\n      tagName = content\n    } else {\n      //找到了空格则到第一个空格之前的是标签名\n      tagName = content.slice(0, firstSpaceIdx)\n      attrStr = content.slice(firstSpaceIdx + 1)\n    }\n\n    //得到一个属性的数组\n    const attrArr = attrStr ? attrStr.split(' ') : [];\n    //解析成一个属性对象\n    const attrs = parserAttrs(attrArr);\n    return {\n      tagName,\n      attrs\n    }\n  }\n\n  function parserEndTag(html) {\n    const end = html.indexOf('>')\n    const tagStart = html.indexOf('/');\n    const tagEnd = html.indexOf('>');\n    const tagName = html.slice(tagStart + 1, tagEnd);\n    advance(end + 1)\n    return {\n      tagName\n    }\n  }\n\n  //解析的内容如果存在一直解析\n  while (html) {\n    let textEnd = html.indexOf('<');\n    //解析到开头\n    if (textEnd === 0) {\n      //解析开始标签\n      const startTagMatch = parserStartTag(html);\n      if (startTagMatch) {\n        start(startTagMatch.tagName, start.attrs)\n        continue;\n      }\n      const endTagMatch = parserEndTag(html);\n      if (endTagMatch) {\n        end(endTagMatch.tagName);\n        continue;\n      }\n    }\n\n    //文本的处理\n    let text;\n    if (textEnd > 0) {\n      text = html.slice(0, textEnd);\n    }\n\n    if (text) {\n      chars(text)\n      advance(text.length)\n    }\n  }\n\n  return root\n}\n\nfunction genProps(attrs) {\n  let str = ''\n  for (let i = 0; i < attrs.length; i++) {\n    const attr = attrs[i];\n    if (attr.name === 'style') {\n      //属性是style转换成对象\n      let obj = {};\n      attr.value.split(';').forEach(item => {\n        let [key, value] = item.split(':')\n        obj[key] = value\n      })\n      attr.value = obj\n    }\n    str += `${attr.name}:${attr.value},`\n  }\n  return `{${str.slice(0, str.length - 2)}}`\n}\n\nfunction generate(el) {\n  let code = `_c(\"${el.tag}\",${el.attrs && el.attrs.length ? genProps(el.attrs) : 'undefind'})`\n\n  return code\n}\n\n\nexport function compileToFunction(template) {\n\n  const root = parserHTML(template);\n\n  let code = generate(root);\n  console.log(code)\n}\n","//判断是否为一个对象\nexport function isObject(value) {\n  return typeof value === 'object' && value !== null\n}\n\n\nexport function def(data, key, value) {\n  Object.defineProperty(data, key, {\n    enumerable: false,\n    configurable: false,\n    value\n  })\n}\n","const oldArrayMethods = Array.prototype;\nexport const arrayMetods = Object.create(oldArrayMethods);\n\n\nconst methods = [\n  'push',\n  'shift',\n  'unshift',\n  'pop',\n  'splice',\n  'reverse'\n]\n\nmethods.forEach(method => {\n  arrayMetods[method] = function (...args) {\n    //调用原生的数组方法\n    const result = oldArrayMethods[method].apply(this, args)\n    let inserted;\n    let ob = this.__ob__;\n\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args;\n        break;\n      case 'splice':\n        inserted = args.slice(2)\n        break;\n      default:\n        break;\n    }\n\n    if (inserted) {\n      ob.observerArray(inserted)\n    }\n\n    return result\n  }\n})\n","\nimport { def, isObject } from \"../utils/index\";\nimport { arrayMetods } from \"./array\"\n\nfunction defineReactive(target, key, value) {\n  observe(value);\n  return Object.defineProperty(target, key, {\n    get() {\n      /**\n       * todo:依赖收集\n      */\n      return value\n    },\n    set(newValue) {\n      if (value === newValue) return\n      console.log('更新数据')\n      observe(newValue)\n      /**\n       * todo:依赖更新\n      */\n      value = newValue\n    }\n  })\n}\n\nclass Observer {\n  constructor(value) {\n    //缺点:vue2中如果层次过多，那么需要递归的解析对象属性\n    def(value, '__ob__', this);\n    if (Array.isArray(value)) {\n      //如果数组下放对象则劫持\n      value.__proto__ = arrayMetods\n      this.observerArray(value);\n    } else {\n      this.walk(value);\n    }\n  }\n\n  walk(data) {\n    Object.keys(data).forEach(key => {\n      const value = data[key]\n      defineReactive(data, key, value)\n    })\n  }\n\n  observerArray(value) {\n    value.forEach(v => {\n      observe(v)\n    })\n  }\n}\n\nexport function observe(data) {\n  if (!isObject(data)) {\n    return data\n  }\n\n  //观测数据\n  new Observer(data)\n}\n","\nimport { observe } from \"./observer/index\";\n\nexport function initState(vm) {\n  const opts = vm.$options;\n  if (opts.props) {\n    initProps(vm)\n  }\n  if (opts.methods) {\n    initMethods(vm)\n  }\n  if (opts.data) {\n    initData(vm)\n  }\n  if (opts.computed) {\n    initComputed(vm)\n  }\n  if (opts.watch) {\n    initWatch(vm)\n  }\n}\n\nfunction initProps(vm) { }\nfunction initMethods(vm) { }\nfunction initData(vm) {\n  //数据初始化\n  let data = vm.$options.data;\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data;\n  //对象劫持\n  //MVVM 数据驱动视图\n\n  observe(data);\n}\nfunction initComputed(vm) { }\nfunction initWatch(vm) { }\n","\nimport { compileToFunction } from \"./compiler/index\";\nimport { initState } from \"./state\";\n\n//在原型添加一个init方法\nexport function initMixin(Vue) {\n  //初始化流程\n  Vue.prototype._init = function (options) {\n\n    //数据劫持\n    const vm = this;\n    vm.$options = options;\n\n    //初始化状态\n    initState(vm);\n\n    if(vm.$options.el){\n      //数据挂载到模板 \n      vm.$mount(vm.$options.el);\n    }\n  }\n\n  Vue.prototype.$mount = function(el){\n    const vm = this;\n    const options = vm.$options;\n    el = document.querySelector(el);\n    //模板转换成渲染函数\n    if(!options.render){\n        //没有render找template\n        let template = options.template;\n        if(!template && el){\n          //没有template 取el的内容作为模板\n          template = el.outerHTML\n                   \n          let render = compileToFunction(template);\n          options.render = render\n        }\n    }\n  }\n}\n","import { initMixin } from \"./init\";\n//核心\nfunction Vue(options) {\n  //进行初始化\n  this._init(options)\n\n}\n\ninitMixin(Vue)\n\nexport default Vue\n"],"names":["createAstElement","tagName","attrs","tag","type","children","parent","root","stack","parserHTML","html","start","attributes","length","element","push","end","last","pop","Error","chars","text","replace","advance","len","slice","parserAttrs","attrMap","i","attr","split","attrName","attrValue","parserStartTag","indexOf","content","firstSpaceIdx","attrStr","attrArr","parserEndTag","tagStart","tagEnd","textEnd","startTagMatch","endTagMatch","genProps","str","name","obj","value","forEach","item","key","generate","el","code","compileToFunction","template","console","log","isObject","def","data","Object","defineProperty","enumerable","configurable","oldArrayMethods","Array","prototype","arrayMetods","create","methods","method","args","result","apply","inserted","ob","__ob__","observerArray","defineReactive","target","observe","get","set","newValue","Observer","isArray","__proto__","walk","keys","v","initState","vm","opts","$options","props","initData","computed","watch","_data","call","initMixin","Vue","_init","options","$mount","document","querySelector","render","outerHTML"],"mappings":"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"}